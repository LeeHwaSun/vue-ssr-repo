{"version":3,"sources":["webpack:///./src/views/board/skins/basic/component/CommentForm.vue","webpack:///src/views/board/skins/basic/component/CommentForm.vue","webpack:///./src/views/board/skins/basic/component/CommentForm.vue?7052","webpack:///./src/views/board/skins/basic/component/CommentForm.vue?7738"],"names":["render","_vm","this","_c","_self","user","ref","attrs","model","value","valid","callback","$$v","expression","label","rules","required","on","$event","type","indexOf","_k","keyCode","key","ctrlKey","save","apply","arguments","resetValid","scopedSlots","_u","fn","item","wr_parent","$emit","_v","_e","proxy","form","wr_content","$set","trim","$route","fullPath","staticRenderFns","name","props","table","wr_reply","default","data","computed","created","methods","initForm","user_id","wr_email","wr_name","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAII,KAAMF,EAAG,MAAM,CAACA,EAAG,SAAS,CAACG,IAAI,OAAOC,MAAM,CAAC,kBAAkB,IAAIC,MAAM,CAACC,MAAOR,EAAIS,MAAOC,SAAS,SAAUC,GAAMX,EAAIS,MAAME,GAAKC,WAAW,UAAU,CAACV,EAAG,aAAa,CAACG,IAAI,WAAWC,MAAM,CAAC,SAAW,GAAG,MAAQN,EAAIa,MAAM,MAAQ,CAACb,EAAIc,MAAMC,SAAS,CAAEF,MAAOb,EAAIa,SAAU,KAAO,IAAI,YAAY,IAAIG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQnB,EAAIoB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAgB,KAASL,EAAOM,QAA2BvB,EAAIwB,KAAKC,MAAM,KAAMC,WAAjC,MAA6C,KAAO1B,EAAI2B,YAAYC,YAAY5B,EAAI6B,GAAG,CAAC,CAACP,IAAI,eAAeQ,GAAG,WAAW,MAAO,CAAE9B,EAAI+B,MAAQ/B,EAAIgC,UAAW9B,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,IAAIU,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIiC,MAAM,cAAc,CAAC/B,EAAG,SAAS,CAACF,EAAIkC,GAAG,gBAAgB,GAAGlC,EAAImC,KAAKjC,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,IAAIU,GAAG,CAAC,MAAQhB,EAAIwB,OAAO,CAACtB,EAAG,SAAS,CAACF,EAAIkC,GAAG,iBAAiB,KAAKE,OAAM,IAAO,MAAK,EAAM,WAAW7B,MAAM,CAACC,MAAOR,EAAIqC,KAAKC,WAAY5B,SAAS,SAAUC,GAAMX,EAAIuC,KAAKvC,EAAIqC,KAAM,aAA8B,kBAAR1B,EAAkBA,EAAI6B,OAAQ7B,IAAOC,WAAW,sBAAsB,IAAI,GAAGV,EAAG,MAAM,CAACF,EAAIkC,GAAG,2BAA2BhC,EAAG,QAAQ,CAACI,MAAM,CAAC,GAAM,kBAAiBN,EAAIyC,OAAOC,WAAa,CAAC1C,EAAIkC,GAAG,UAAU,IAE3uCS,EAAkB,G,6CCiCP,GACfC,mBACAC,OACAC,OACA5B,YACAH,aAEAgC,UACA7B,YACAH,aAEAiB,WACAd,YACA8B,WAEAjB,MACAb,YACA8B,eAGAC,OACA,OACAxC,SACA4B,YAGAa,aACA,gBACA9C,sBAEAU,cACAD,QACA,iBACA,QAEA,oCAIAsC,UACA,iBAEAC,SACAC,WACA,aACA,aACA,+CACA,CACA,SACAN,uBACAf,yBACAsB,0BACAC,8BACAC,4BACAlB,eAEA,cAIA,aAGA,GAFA,iCACA,kBACA,kBACA,MAEAW,EADA,gBACAA,qFAEAA,2DAEA,IACA,sCACA,yBACA,gBACA,kCACA,wBAGAtB,aACA,qCClHiZ,I,YCO7Y8B,EAAY,eACd,EACA1D,EACA4C,GACA,EACA,KACA,KACA,MAIa,aAAAc,E","file":"js/chunk-2d0c207f.ee883af9.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.user)?_c('div',[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-textarea',{ref:\"textarea\",attrs:{\"outlined\":\"\",\"label\":_vm.label,\"rules\":[_vm.rules.required({ label: _vm.label })],\"rows\":\"2\",\"auto-grow\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if(!$event.ctrlKey)return null;return _vm.save.apply(null, arguments)},\"blur\":_vm.resetValid},scopedSlots:_vm._u([{key:\"append-outer\",fn:function(){return [(_vm.item || _vm.wr_parent)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('onClose')}}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1):_vm._e(),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.save}},[_c('v-icon',[_vm._v(\"mdi-pencil\")])],1)]},proxy:true}],null,false,575172357),model:{value:(_vm.form.wr_content),callback:function ($$v) {_vm.$set(_vm.form, \"wr_content\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.wr_content\"}})],1)],1):_c('div',[_vm._v(\" 로그인 후 댓글을 작성할 수 있습니다. \"),_c('v-btn',{attrs:{\"to\":`/login?nextUrl=${_vm.$route.fullPath}`}},[_vm._v(\"로그인\")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div v-if=\"user\">\r\n        <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n            <v-textarea\r\n                ref=\"textarea\"\r\n                outlined\r\n                v-model.trim=\"form.wr_content\" \r\n                :label=\"label\" \r\n                :rules=\"[rules.required({ label })]\"\r\n                rows=\"2\"\r\n                auto-grow\r\n                @keyup.ctrl.enter=\"save\"\r\n                @blur=\"resetValid\"\r\n            >\r\n                <template v-slot:append-outer>\r\n                    <v-btn v-if=\"item || wr_parent\" icon @click=\"$emit('onClose')\">\r\n                        <v-icon>mdi-close</v-icon>\r\n                    </v-btn>\r\n                    <v-btn icon @click=\"save\">\r\n                        <v-icon>mdi-pencil</v-icon>\r\n                    </v-btn>\r\n                </template>\r\n            </v-textarea>\r\n        </v-form>\r\n    </div>\r\n    <div v-else>\r\n        로그인 후 댓글을 작성할 수 있습니다.\r\n        <v-btn :to=\"`/login?nextUrl=${$route.fullPath}`\">로그인</v-btn>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport { deepCopy } from '../../../../../../util/lib';\r\nimport validateRules from '../../../../../../util/validateRules';\r\nexport default {\r\n    name: \"CommentForm\",\r\n    props: {\r\n        table : {\r\n            type : String,\r\n            required : true\r\n        },\r\n        wr_reply : {\r\n            type : Number,\r\n            required : true\r\n        },\r\n        wr_parent : {\r\n            type : Number,\r\n            default : 0\r\n        },\r\n        item : {\r\n            type : Object,\r\n            default : null\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n           valid : true,\r\n           form : null, \r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            user : state => state.user.user,\r\n        }),\r\n        rules : () => validateRules,\r\n        label() {\r\n            if (this.item) {\r\n                return \"댓글 수정\";\r\n            } else {\r\n                return this.wr_parent == 0 ? \"댓글 작성\" : \"답글 달기\";\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.initForm();\r\n    },\r\n    methods: {\r\n        initForm() {\r\n            if (this.user) {\r\n                if (this.item) { // 수정\r\n                    this.form = deepCopy(this.item);\r\n                } else { // 신규\r\n                    const form = {\r\n                        wr_reply : this.wr_reply,\r\n                        wr_parent : this.wr_parent,\r\n                        user_id : this.user.user_id,\r\n                        wr_email : this.user.user_email,\r\n                        wr_name : this.user.user_name,\r\n                        wr_content : \"\",\r\n                    };\r\n                    this.form = form;\r\n                }\r\n            }\r\n        },\r\n        async save() {\r\n            this.$refs.form.validate();\r\n            await this.$nextTick();\r\n            if (!this.valid) return;\r\n            let data;\r\n            if (this.item) { // 수정\r\n                data = await this.$axios.put(`/api/board/write/${this.table}/${this.item.wr_id}`, this.form);\r\n            } else { // 신규 && 대댓글\r\n                data = await this.$axios.post(`/api/board/write/${this.table}`, this.form);\r\n            }\r\n            if (data) {\r\n                if (!this.item) this.$refs.textarea.blur();\r\n                this.$emit('onUpdate', data);\r\n                this.initForm();\r\n                this.$refs.form.resetValidation();\r\n                this.$emit('onClose');\r\n            }\r\n        },\r\n        resetValid() {\r\n            this.$refs.form.resetValidation();\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentForm.vue?vue&type=template&id=34d3dea7&\"\nimport script from \"./CommentForm.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}