(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cba44"],{"4b11":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;return t("v-container",{attrs:{fluid:""}},[t("v-toolbar",[t("v-toolbar-title",[e._v(e._s(e.pageTitle))]),t("v-spacer"),t("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.save}},[t("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v(" 저장 ")],1)],1),e.form?t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-text-field",{attrs:{label:"팝업 제목",counter:"120",rules:[e.rules.required({label:"제목"})]},model:{value:e.form.wr_title,callback:function(t){e.$set(e.form,"wr_title",t)},expression:"form.wr_title"}}),t("div",{staticClass:"d-flex align-center"},[t("div",[e._v("선택 시 몇일동안 팝업을 보여주지 않음(기본값 : 1일)")]),t("v-radio-group",{staticClass:"ml-4",attrs:{row:""},model:{value:e.form.wr_1,callback:function(t){e.$set(e.form,"wr_1",t)},expression:"form.wr_1"}},[t("v-radio",{attrs:{label:"1일",value:"1"}}),t("v-radio",{attrs:{label:"3일",value:"3"}}),t("v-radio",{attrs:{label:"7일",value:"7"}})],1),t("v-spacer"),t("v-checkbox",{attrs:{label:"사용여부","true-value":"1","false-value":"0"},model:{value:e.form.wr_4,callback:function(t){e.$set(e.form,"wr_4",t)},expression:"form.wr_4"}})],1),t("date-time-picker",{attrs:{label:"시작 일시"},model:{value:e.form.wr_2,callback:function(t){e.$set(e.form,"wr_2",t)},expression:"form.wr_2"}}),t("date-time-picker",{attrs:{label:"종료 일시"},model:{value:e.form.wr_3,callback:function(t){e.$set(e.form,"wr_3",t)},expression:"form.wr_3"}}),t("div",{staticClass:"d-flex"},[t("v-text-field",{attrs:{label:"top",suffix:"px",rules:[e.rules.required({label:"top"})]},model:{value:e.form.wr_6,callback:function(t){e.$set(e.form,"wr_6",t)},expression:"form.wr_6"}}),t("v-text-field",{staticClass:"ml-4",attrs:{label:"left",suffix:"px",rules:[e.rules.required({label:"left"})]},model:{value:e.form.wr_7,callback:function(t){e.$set(e.form,"wr_7",t)},expression:"form.wr_7"}}),t("v-text-field",{staticClass:"ml-4",attrs:{label:"width",suffix:"px",rules:[e.rules.required({label:"width"})]},model:{value:e.form.wr_8,callback:function(t){e.$set(e.form,"wr_8",t)},expression:"form.wr_8"}}),t("v-text-field",{staticClass:"ml-4",attrs:{label:"height",suffix:"px",rules:[e.rules.required({label:"height"})]},model:{value:e.form.wr_9,callback:function(t){e.$set(e.form,"wr_9",t)},expression:"form.wr_9"}})],1),t("v-text-field",{attrs:{label:"링크"},model:{value:e.form.wr_5,callback:function(t){e.$set(e.form,"wr_5",t)},expression:"form.wr_5"}}),t("ez-tiptap",{attrs:{editable:!0},on:{uploadImage:e.uploadImage},model:{value:e.form.wr_content,callback:function(t){e.$set(e.form,"wr_content",t)},expression:"form.wr_content"}}),e._l(e.config.brd_upload_cnt,(function(i){return t("div",{staticClass:"d-flex"},[t("v-file-input",{attrs:{label:e.fileTitle(i),"show-size":"",disabled:!(!e.form.wrFile||!e.form.wrFiles[i-1])&&!e.form.wrFiles[i-1].remove},model:{value:e.uploadFiles[i-1],callback:function(t){e.$set(e.uploadFiles,i-1,t)},expression:"uploadFiles[i - 1]"}}),e.form.wrFiles&&e.form.wrFiles[i-1]?t("div",[t("v-checkbox",{attrs:{label:"삭제"},on:{change:function(t){e.uploadFiles[i-1]=null}},model:{value:e.form.wrFiles[i-1].remove,callback:function(t){e.$set(e.form.wrFiles[i-1],"remove",t)},expression:"form.wrFiles[i - 1].remove"}})],1):e._e()],1)}))],2):e._e()],1)},s=[],a=i("2f62"),l=i("248f"),o=i.n(l),n=i("056e"),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex"},[t("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:i,attrs:r}){return[t("v-text-field",e._g(e._b({attrs:{label:e.label,"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",r,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("v-select",{staticClass:"ml-4",staticStyle:{"max-width":"80px"},attrs:{items:e.hourItems,suffix:"시"},model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}}),t("v-select",{staticClass:"ml-4",staticStyle:{"max-width":"80px"},attrs:{items:e.minItems,suffix:"분"},model:{value:e.min,callback:function(t){e.min=t},expression:"min"}})],1)},c=[],m={name:"DateTimePicker",model:{value:"value",event:"input"},props:{value:{type:String,required:!0},label:{type:String,required:!0}},data(){return{menu:!1,date:"",hour:0,min:0}},computed:{hourItems(){const e=[];for(let t=0;t<24;t++)e.push(t);return e},minItems(){const e=[];for(let t=0;t<60;t++)e.push(t);return e}},watch:{date(){this.emitValue()},hour(){this.emitValue()},min(){this.emitValue()}},created(){const e=this.value?this.$moment(this.value):this.$moment();this.date=e.format("L"),this.hour=parseInt(e.format("H")),this.min=parseInt(e.format("m"))},methods:{emitValue(){if(!this.date)return;const e=this.$moment(this.date);e.set("hour",this.hour),e.set("minute",this.min),this.$emit("input",e.format("LT"))}}},d=m,f=i("2877"),p=Object(f["a"])(d,u,c,!1,null,null,null),h=p.exports,w={components:{InputPassword:n["a"],DateTimePicker:h},name:"BasicForm",title(){return this.pageTitle},props:{config:Object,access:Object,id:[String,Number]},data(){return{form:null,valid:!0,confirmPw:"",uploadFiles:Array(this.config.brd_upload_cnt).fill(null),tags:[],loading:!1,upImages:[],isWrite:!1,parentItem:null}},computed:{...Object(a["e"])({user:e=>e.user.user}),table(){return this.config.brd_table},pid(){return"reply"==this.$route.query.act?this.id:0},pageTitle(){let e="";return e=this.pid?" 게시물 답글 작성":this.id?" 게시물 수정":" 게시물 작성",this.config.brd_subject+e},rules:()=>o.a},mounted(){this.init()},destroyed(){!this.isWrite&&this.upImages.length&&this.$axios.put("/api/board/imgCancel/"+this.table,this.upImages)},methods:{async init(){if(this.id){const e=await this.$axios.get(`/api/board/detail/${this.table}/${this.id}`);this.pid?(this.initForm(),this.form.wr_category=e.wr_category,this.parentItem=e):this.form=e,this.form.wr_password=""}else this.initForm()},initForm(){const e={wr_reply:0,wr_parent:this.pid,user_id:this.user?this.user.user_id:0,wr_email:this.user?this.user.user_email:"",wr_name:this.user?this.user.user_name:"",wr_password:"",wr_category:this.$route.query.ca||this.config.brd_category[0]||"",wr_title:"",wr_content:"",wrTags:[]};for(let t=1;t<=10;t++)e["wr_"+t]="";e.wr_1="1",e.wr_4="1",this.form=e},fileTitle(e){if(this.form.wrFiles){const t=this.form.wrFiles[e-1];return t&&!t.remove?t.brd_file_name:"첨부파일 "+e}return"첨부파일 "+e},async uploadImage({file:e,desc:t,callback:i}){const r=new FormData;r.append("upFile",e),r.append("brd_file_desc",t);const s=await this.$axios.post("/api/board/imageUpload/"+this.table,r);this.upImages.push(s),i(`/upload/${this.table}/${s.brd_file_src}`)},async save(){if(this.$refs.form.validate(),await this.$nextTick(),!this.valid)return;this.loading=!0;const e=new FormData,t=Object.keys(this.form);for(const s of t)"object"===typeof this.form[s]?e.append(s,JSON.stringify(this.form[s])):e.append(s,this.form[s]);this.$route.query.token&&e.append("token",this.$route.query.token);let i,r=0;for(let s=0;s<this.config.brd_upload_cnt;s++)null!=this.uploadFiles[s]&&(e.append("upFiles["+r,this.uploadFiles[s]),r++);e.append("upImages",JSON.stringify(this.upImages)),i=this.id&&!this.pid?await this.update(e):await this.insert(e),i&&(this.isWrite=!0,this.$router.push("/board/"+this.table)),this.loading=!1},async insert(e){const t=await this.$axios.post("/api/board/write/"+this.table,e);return t.wr_id},async update(e){const t=await this.$axios.put(`/api/board/write/${this.table}/${this.id}`,e);return t.wr_id}}},b=w,v=Object(f["a"])(b,r,s,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0cba44.4512865d.js.map