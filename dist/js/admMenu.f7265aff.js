(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admMenu"],{"08b3":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-avatar",e._g(e._b({attrs:{size:e.size,color:e.LV_COLOR(e.level)}},"v-avatar",a,!1),i),[n("span",{staticStyle:{color:"#121212"}},[e._v(e._s(e.level))])])]}}])},[n("span",[e._v(e._s(e.LV_LABEL(e.level)))])])},a=[],r=(n("a9e3"),n("bb5e")),o={name:"DisplayLevel",props:{level:{type:[Number,String],required:!0},size:{type:[String,Number],default:24}},computed:{LV_COLOR:function(){return r["LV_COLOR"]},LV_LABEL:function(){return r["LV_LABEL"]}}},s=o,l=n("2877"),c=Object(l["a"])(s,i,a,!1,null,null,null);t["a"]=c.exports},"2f90":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",e._b({model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},"v-dialog",e.$attrs,!1),[n("v-card",[n("v-toolbar",e._b({},"v-toolbar",e.$attrs,!1),[n("v-toolbar-title",[e._v(e._s(e.label))]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.close}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-text",[e._t("default")],2)],1)],1)},a=[],r={name:"MyDialog",props:{label:{type:String,required:!0}},data:function(){return{dialog:!1}},methods:{open:function(){this.$emit("onOpen"),this.dialog=!0},close:function(){this.$emit("onClose"),this.dialog=!1}}},o=r,s=n("2877"),l=Object(s["a"])(o,i,a,!1,null,null,null);t["a"]=l.exports},ed2f:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({class:e.childClass,attrs:{icon:""},on:{click:function(t){return e.$emit("click")}}},"v-btn",Object.assign({},e.$attrs,a),!1),i),[e._t("default")],2)]}}],null,!0)},[n("span",[e._v(e._s(e.label))])])},a=[],r={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},o=r,s=n("2877"),l=Object(s["a"])(o,i,a,!1,null,null,null);t["a"]=l.exports},f213:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-toolbar",[n("v-toolbar-title",[e._v("메뉴관리")]),n("v-spacer"),n("tooltip-btn",{attrs:{label:"Add Menu",icon:"",small:"",fab:"",color:"secondary"},on:{click:e.addMenu}},[n("v-icon",[e._v("mdi-plus")])],1),n("tooltip-btn",{attrs:{label:"Save Menu",icon:"",small:"",fab:"",color:"primary"},on:{click:e.updateMenu}},[n("v-icon",[e._v("mdi-content-save")])],1),n("tooltip-btn",{attrs:{label:"Reset",icon:"",small:"",fab:"",color:"error"},on:{click:e.refresh}},[n("v-icon",[e._v("mdi-refresh")])],1)],1),n("nested-drag-menu",{staticClass:"mt-4",attrs:{items:e.items}}),n("my-dialog",{ref:"dialog",attrs:{width:"500",label:"메뉴",persistent:""}},[n("menu-form",{staticClass:"mt-4",attrs:{item:e.curItem},on:{save:e.save}})],1)],1)},a=[],r=n("1da1"),o=n("b85c"),s=n("5530"),l=(n("96cf"),n("a434"),n("2f62")),c=n("64f2"),u=n("ed2f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("draggable",e._b({staticClass:"menu-drag-container",attrs:{tag:"div",list:e.items,handle:".handle"}},"draggable",e.dragOptions,!1),e._l(e.items,(function(t,i){return n("div",{key:""+i+t.title,staticClass:"menu-drag-group"},[n("v-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[n("div",{staticClass:"menu-drag-zone"},[n("v-sheet",{staticClass:"menu-drag-item d-flex pa-4 pt-6",attrs:{outlined:"",rounded:"",elevation:"2"}},[n("div",{staticClass:"icon"},[n("v-icon",[e._v("mdi-subdirectory-arrow-right")])],1),n("div",{staticClass:"handle"},[n("v-icon",[e._v("mdi-drag")])],1),n("v-btn",{attrs:{icon:"",disabled:0==t.subItems.length,small:""},on:{click:function(n){return e.toggleSub(t)}}},[n("v-icon",[e._v("mdi-chevron-down")])],1),t.isHide?n("v-icon",{attrs:{color:"gray"}},[e._v("mdi-eye-off")]):n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-eye")]),n("v-text-field",{staticClass:"ml-2",attrs:{label:"메뉴명","hide-details":"",dense:"","prepend-icon":t.icon,readonly:""},model:{value:t.title,callback:function(n){e.$set(t,"title",n)},expression:"item.title"}}),n("display-level",{attrs:{level:t.grant,size:32}}),n("v-text-field",{staticClass:"ml-2",attrs:{label:"link","hide-details":"",dense:"",readonly:""},model:{value:t.to,callback:function(n){e.$set(t,"to",n)},expression:"item.to"}}),n("tooltip-btn",{attrs:{label:"Modify",icon:"",small:"",color:"primary",childClass:"ml-2"},on:{click:function(n){return e.modifyItem(t)}}},[n("v-icon",[e._v("mdi-pencil")])],1),n("tooltip-btn",{attrs:{label:"Remove",icon:"",small:"",color:"error",childClass:"ml-2"},on:{click:function(n){return e.removeItem(t)}}},[n("v-icon",[e._v("mdi-trash-can")])],1)],1)],1),n("nested-drag-menu",{staticClass:"menu-drag-subitem",attrs:{items:t.subItems,show:t.show}})],1)])],1)})),0)},d=[],f=n("08b3"),v=n("b76a"),p=n.n(v),b={components:{draggable:p.a,DisplayLevel:f["a"],TooltipBtn:u["a"]},name:"NestedDragMenu",props:{items:{type:Array,required:!0},show:{type:Boolean,default:!0}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}},created:function(){var e,t=Object(o["a"])(this.items);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.$set(n,"show",!1)}}catch(i){t.e(i)}finally{t.f()}},methods:{toggleSub:function(e){e.show=!e.show},removeItem:function(e){var t=this.items.indexOf(e);this.items.splice(t,1)},modifyItem:function(e){var t=Object(c["findParentVm"])(this,"AdmMenu");t.modifyMenu(e,this.items)}}},h=b,g=n("2877"),_=Object(g["a"])(h,m,d,!1,null,null,null),y=_.exports,k=n("2f90"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.form?n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.save.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-btn",{attrs:{plain:"",href:"https://materialdesignicons.com/",target:"_blank",color:"success",small:""}},[e._v(" Search Material Design Icon ")]),n("v-text-field",{attrs:{label:"아이콘","prepend-icon":e.form.icon},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}}),n("v-text-field",{attrs:{label:"메뉴명",rules:[e.rules.required({label:"메뉴명"})]},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),n("v-text-field",{attrs:{label:"링크"},model:{value:e.form.to,callback:function(t){e.$set(e.form,"to",t)},expression:"form.to"}}),n("input-level",{attrs:{label:"접근권한"},model:{value:e.form.grant,callback:function(t){e.$set(e.form,"grant",t)},expression:"form.grant"}}),n("v-checkbox",{attrs:{label:"새창에서 열기"},model:{value:e.form.newTab,callback:function(t){e.$set(e.form,"newTab",t)},expression:"form.newTab"}}),n("v-checkbox",{attrs:{label:"메뉴 숨김"},model:{value:e.form.isHide,callback:function(t){e.$set(e.form,"isHide",t)},expression:"form.isHide"}}),n("v-btn",{attrs:{block:"",type:"submit",color:"primary"}},[e._v("Save")])],1):e._e()},w=[],O=n("3807"),$=n("248f"),C=n.n($),j={components:{InputLevel:O["a"]},name:"MenuForm",props:{item:{type:Object,default:null}},data:function(){return{valid:!0,form:null}},computed:{rules:function(){return C.a}},watch:{item:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){this.item?this.form=Object(c["deepCopy"])(this.item):this.form={grant:0,icon:"mdi-",newTab:!1,subItems:[],title:"",to:"",isHide:!1}},save:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.form.validate(),t.next=3,e.$nextTick();case 3:if(e.valid){t.next=5;break}return t.abrupt("return");case 5:e.$emit("save",e.form),e.init();case 7:case"end":return t.stop()}}),t)})))()}}},M=j,L=Object(g["a"])(M,x,w,!1,null,null,null),S=L.exports,I={components:{TooltipBtn:u["a"],NestedDragMenu:y,MyDialog:k["a"],MenuForm:S},name:"AdmMenu",title:"메뉴 관리",data:function(){return{items:[],curItem:null,parent:null}},computed:Object(s["a"])({},Object(l["e"])({menu:function(e){return e.config.menu}})),mounted:function(){this.init()},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["configSave"])),{},{init:function(){var e,t=Object(c["deepCopy"])(this.menu),n=Object(o["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.$set(i,"show",!1)}}catch(a){n.e(a)}finally{n.f()}this.items=t},addMenu:function(){this.curItem=null,this.$refs.dialog.open()},modifyMenu:function(e,t){this.curItem=e,this.parent=t,this.$refs.dialog.open()},save:function(e){if(this.curItem){var t=this.parent.indexOf(this.curItem);this.parent.splice(t,1,e)}else e.show=!1,this.items.push(e);this.$refs.dialog.close()},refresh:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$myNotify.confirm("변경될 메뉴를 초기화 하시겠습니까?","메뉴 초기화",{icon:"mdi-refresh",iconColor:"red"});case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.init();case 6:case"end":return t.stop()}}),t)})))()},updateMenu:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$myNotify.confirm("메뉴를 저장 하시겠습니까?","메뉴 저장",{icon:"mdi-content-save-outline",iconColor:"blue"});case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.configSave({cfg_client:1,cfg_comment:"메뉴는 메뉴관리자에서 수정하세요.",cfg_group:"기본환경",cfg_name:"메뉴",cfg_level:6,cfg_type:"JSON",cfg_key:"menu",cfg_val:JSON.stringify(e.items)});case 7:i=t.sent,i&&(e.$toast.info("메뉴를 업데이트 하였습니다."),e.$socket.emit("config:update",{key:i.cfg_key,value:i.cfg_val}));case 9:case"end":return t.stop()}}),t)})))()}})},R=I,E=Object(g["a"])(R,i,a,!1,null,null,null);t["default"]=E.exports}}]);
//# sourceMappingURL=admMenu.f7265aff.js.map