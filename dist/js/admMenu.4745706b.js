(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admMenu"],{"08b3":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-avatar",t._g(t._b({attrs:{size:t.size,color:t.LV_COLOR(t.level)}},"v-avatar",s,!1),i),[e("span",{staticStyle:{color:"#121212"}},[t._v(t._s(t.level))])])]}}])},[e("span",[t._v(t._s(t.LV_LABEL(t.level)))])])},o=[],a=i("bb5e"),n={name:"DisplayLevel",props:{level:{type:[Number,String],required:!0},size:{type:[String,Number],default:24}},computed:{LV_COLOR:()=>a["LV_COLOR"],LV_LABEL:()=>a["LV_LABEL"]}},l=n,r=i("2877"),c=Object(r["a"])(l,s,o,!1,null,null,null);e["a"]=c.exports},"2f90":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[e("v-card",[e("v-toolbar",t._b({},"v-toolbar",t.$attrs,!1),[e("v-toolbar-title",[t._v(t._s(t.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._t("default")],2)],1)],1)},o=[],a={name:"MyDialog",props:{label:{type:String,required:!0}},data(){return{dialog:!1}},methods:{open(){this.$emit("onOpen"),this.dialog=!0},close(){this.$emit("onClose"),this.dialog=!1}}},n=a,l=i("2877"),r=Object(l["a"])(n,s,o,!1,null,null,null);e["a"]=r.exports},ed2f:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({class:t.childClass,attrs:{icon:""},on:{click:function(e){return t.$emit("click")}}},"v-btn",{...t.$attrs,...s},!1),i),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},o=[],a={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},n=a,l=i("2877"),r=Object(l["a"])(n,s,o,!1,null,null,null);e["a"]=r.exports},f213:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("v-container",[e("v-toolbar",[e("v-toolbar-title",[t._v("메뉴관리")]),e("v-spacer"),e("tooltip-btn",{attrs:{label:"Add Menu",icon:"",small:"",fab:"",color:"secondary"},on:{click:t.addMenu}},[e("v-icon",[t._v("mdi-plus")])],1),e("tooltip-btn",{attrs:{label:"Save Menu",icon:"",small:"",fab:"",color:"primary"},on:{click:t.updateMenu}},[e("v-icon",[t._v("mdi-content-save")])],1),e("tooltip-btn",{attrs:{label:"Reset",icon:"",small:"",fab:"",color:"error"},on:{click:t.refresh}},[e("v-icon",[t._v("mdi-refresh")])],1)],1),e("nested-drag-menu",{staticClass:"mt-4",attrs:{items:t.items}}),e("my-dialog",{ref:"dialog",attrs:{width:"500",label:"메뉴",persistent:""}},[e("menu-form",{staticClass:"mt-4",attrs:{item:t.curItem},on:{save:t.save}})],1)],1)},o=[],a=i("2f62"),n=i("64f2"),l=i("ed2f"),r=function(){var t=this,e=t._self._c;return e("draggable",t._b({staticClass:"menu-drag-container",attrs:{tag:"div",list:t.items,handle:".handle"}},"draggable",t.dragOptions,!1),t._l(t.items,(function(i,s){return e("div",{key:`${s}${i.title}`,staticClass:"menu-drag-group"},[e("v-expand-transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[e("div",{staticClass:"menu-drag-zone"},[e("v-sheet",{staticClass:"menu-drag-item d-flex pa-4 pt-6",attrs:{outlined:"",rounded:"",elevation:"2"}},[e("div",{staticClass:"icon"},[e("v-icon",[t._v("mdi-subdirectory-arrow-right")])],1),e("div",{staticClass:"handle"},[e("v-icon",[t._v("mdi-drag")])],1),e("v-btn",{attrs:{icon:"",disabled:0==i.subItems.length,small:""},on:{click:function(e){return t.toggleSub(i)}}},[e("v-icon",[t._v("mdi-chevron-down")])],1),i.isHide?e("v-icon",{attrs:{color:"gray"}},[t._v("mdi-eye-off")]):e("v-icon",{attrs:{color:"primary"}},[t._v("mdi-eye")]),e("v-text-field",{staticClass:"ml-2",attrs:{label:"메뉴명","hide-details":"",dense:"","prepend-icon":i.icon,readonly:""},model:{value:i.title,callback:function(e){t.$set(i,"title",e)},expression:"item.title"}}),e("display-level",{attrs:{level:i.grant,size:32}}),e("v-text-field",{staticClass:"ml-2",attrs:{label:"link","hide-details":"",dense:"",readonly:""},model:{value:i.to,callback:function(e){t.$set(i,"to",e)},expression:"item.to"}}),e("tooltip-btn",{attrs:{label:"Modify",icon:"",small:"",color:"primary",childClass:"ml-2"},on:{click:function(e){return t.modifyItem(i)}}},[e("v-icon",[t._v("mdi-pencil")])],1),e("tooltip-btn",{attrs:{label:"Remove",icon:"",small:"",color:"error",childClass:"ml-2"},on:{click:function(e){return t.removeItem(i)}}},[e("v-icon",[t._v("mdi-trash-can")])],1)],1)],1),e("nested-drag-menu",{staticClass:"menu-drag-subitem",attrs:{items:i.subItems,show:i.show}})],1)])],1)})),0)},c=[],m=i("08b3"),u=i("b76a"),d=i.n(u),f={components:{draggable:d.a,DisplayLevel:m["a"],TooltipBtn:l["a"]},name:"NestedDragMenu",props:{items:{type:Array,required:!0},show:{type:Boolean,default:!0}},computed:{dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}}},created(){for(const t of this.items)this.$set(t,"show",!1)},methods:{toggleSub(t){t.show=!t.show},removeItem(t){const e=this.items.indexOf(t);this.items.splice(e,1)},modifyItem(t){const e=Object(n["findParentVm"])(this,"AdmMenu");e.modifyMenu(t,this.items)}}},v=f,p=i("2877"),b=Object(p["a"])(v,r,c,!1,null,null,null),h=b.exports,g=i("2f90"),_=function(){var t=this,e=t._self._c;return t.form?e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-btn",{attrs:{plain:"",href:"https://materialdesignicons.com/",target:"_blank",color:"success",small:""}},[t._v(" Search Material Design Icon ")]),e("v-text-field",{attrs:{label:"아이콘","prepend-icon":t.form.icon},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}}),e("v-text-field",{attrs:{label:"메뉴명",rules:[t.rules.required({label:"메뉴명"})]},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),e("v-text-field",{attrs:{label:"링크"},model:{value:t.form.to,callback:function(e){t.$set(t.form,"to",e)},expression:"form.to"}}),e("input-level",{attrs:{label:"접근권한"},model:{value:t.form.grant,callback:function(e){t.$set(t.form,"grant",e)},expression:"form.grant"}}),e("v-checkbox",{attrs:{label:"새창에서 열기"},model:{value:t.form.newTab,callback:function(e){t.$set(t.form,"newTab",e)},expression:"form.newTab"}}),e("v-checkbox",{attrs:{label:"메뉴 숨김"},model:{value:t.form.isHide,callback:function(e){t.$set(t.form,"isHide",e)},expression:"form.isHide"}}),e("v-btn",{attrs:{block:"",type:"submit",color:"primary"}},[t._v("Save")])],1):t._e()},y=[],k=i("3807"),w=i("248f"),x=i.n(w),$={components:{InputLevel:k["a"]},name:"MenuForm",props:{item:{type:Object,default:null}},data(){return{valid:!0,form:null}},computed:{rules:()=>x.a},watch:{item(){this.init()}},mounted(){this.init()},methods:{init(){this.item?this.form=Object(n["deepCopy"])(this.item):this.form={grant:0,icon:"mdi-",newTab:!1,subItems:[],title:"",to:"",isHide:!1}},async save(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&(this.$emit("save",this.form),this.init())}}},O=$,C=Object(p["a"])(O,_,y,!1,null,null,null),M=C.exports,L={components:{TooltipBtn:l["a"],NestedDragMenu:h,MyDialog:g["a"],MenuForm:M},name:"AdmMenu",title:"메뉴 관리",data(){return{items:[],curItem:null,parent:null}},computed:{...Object(a["e"])({menu:t=>t.config.menu})},mounted(){this.init()},methods:{...Object(a["b"])(["configSave"]),init(){const t=Object(n["deepCopy"])(this.menu);for(const e of t)this.$set(e,"show",!1);this.items=t},addMenu(){this.curItem=null,this.$refs.dialog.open()},modifyMenu(t,e){this.curItem=t,this.parent=e,this.$refs.dialog.open()},save(t){if(this.curItem){const e=this.parent.indexOf(this.curItem);this.parent.splice(e,1,t)}else t.show=!1,this.items.push(t);this.$refs.dialog.close()},async refresh(){const t=await this.$myNotify.confirm("변경될 메뉴를 초기화 하시겠습니까?","메뉴 초기화",{icon:"mdi-refresh",iconColor:"red"});t&&this.init()},async updateMenu(){const t=await this.$myNotify.confirm("메뉴를 저장 하시겠습니까?","메뉴 저장",{icon:"mdi-content-save-outline",iconColor:"blue"});if(!t)return;const e=await this.configSave({cfg_client:1,cfg_comment:"메뉴는 메뉴관리자에서 수정하세요.",cfg_group:"기본환경",cfg_name:"메뉴",cfg_level:6,cfg_type:"JSON",cfg_key:"menu",cfg_val:JSON.stringify(this.items)});e&&(this.$toast.info("메뉴를 업데이트 하였습니다."),this.$socket.emit("config:update",{key:e.cfg_key,value:e.cfg_val}))}}},S=L,I=Object(p["a"])(S,s,o,!1,null,null,null);e["default"]=I.exports}}]);
//# sourceMappingURL=admMenu.4745706b.js.map