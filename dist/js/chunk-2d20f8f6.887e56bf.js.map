{"version":3,"sources":["webpack:///./src/views/board/skins/gallery/Form.vue?d11f","webpack:///src/views/board/skins/gallery/Form.vue","webpack:///./src/views/board/skins/gallery/Form.vue?870d","webpack:///./src/views/board/skins/gallery/Form.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","pageTitle","loading","on","save","ref","model","value","callback","$$v","valid","expression","config","brd_category","rules","required","label","parentItem","form","$set","_e","user","wr_id","name","email","wr_password","id","matchValue","confirmPw","wr_title","uploadImage","tags","_l","item","i","key","title","staticClass","fileTitle","wrFile","wrFiles","remove","uploadFiles","$event","staticRenderFns","formData","append","JSON","stringify","cnt","component"],"mappings":"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","file":"js/chunk-2d20f8f6.887e56bf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.pageTitle))]),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.save}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-pencil\")]),_vm._v(\" 저장 \")],1)],1),(_vm.form)?_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[(_vm.config.brd_use_category)?_c('v-select',{attrs:{\"label\":\"카테고리\",\"items\":_vm.config.brd_category,\"rules\":[_vm.rules.required({ label: '카테고리' })],\"readonly\":!!_vm.parentItem},model:{value:(_vm.form.wr_category),callback:function ($$v) {_vm.$set(_vm.form, \"wr_category\", $$v)},expression:\"form.wr_category\"}}):_vm._e(),(!_vm.user)?[_c('v-text-field',{attrs:{\"label\":\"이름\",\"readonly\":!!_vm.form.wr_id,\"rules\":_vm.rules.name()},model:{value:(_vm.form.wr_name),callback:function ($$v) {_vm.$set(_vm.form, \"wr_name\", $$v)},expression:\"form.wr_name\"}}),_c('v-text-field',{attrs:{\"label\":\"이메일\",\"rules\":_vm.rules.email()},model:{value:(_vm.form.wr_email),callback:function ($$v) {_vm.$set(_vm.form, \"wr_email\", $$v)},expression:\"form.wr_email\"}}),_c('input-password',{attrs:{\"label\":\"비밀번호\",\"rules\":_vm.rules.wr_password({ required : !_vm.id })},model:{value:(_vm.form.wr_password),callback:function ($$v) {_vm.$set(_vm.form, \"wr_password\", $$v)},expression:\"form.wr_password\"}}),_c('input-password',{attrs:{\"label\":\"비밀번호 확인\",\"rules\":[_vm.rules.matchValue(_vm.form.wr_password)]},model:{value:(_vm.confirmPw),callback:function ($$v) {_vm.confirmPw=$$v},expression:\"confirmPw\"}})]:_vm._e(),(_vm.parentItem)?_c('v-expansion-panels',[_c('v-expansion-panel',[_c('v-expansion-panel-header',[_vm._v(\" 원글 : \"+_vm._s(_vm.parentItem.wr_title)+\" \")]),_c('v-expansion-panel-content',[_c('ez-tiptap',{attrs:{\"editable\":false},model:{value:(_vm.parentItem.wr_content),callback:function ($$v) {_vm.$set(_vm.parentItem, \"wr_content\", $$v)},expression:\"parentItem.wr_content\"}})],1)],1)],1):_vm._e(),_c('v-text-field',{attrs:{\"label\":\"제목\",\"counter\":\"120\",\"rules\":[_vm.rules.required({ label: '제목' })]},model:{value:(_vm.form.wr_title),callback:function ($$v) {_vm.$set(_vm.form, \"wr_title\", $$v)},expression:\"form.wr_title\"}}),_c('ez-tiptap',{attrs:{\"editable\":true},on:{\"uploadImage\":_vm.uploadImage},model:{value:(_vm.form.wr_content),callback:function ($$v) {_vm.$set(_vm.form, \"wr_content\", $$v)},expression:\"form.wr_content\"}}),_c('v-combobox',{attrs:{\"label\":\"검색태그\",\"items\":_vm.tags,\"multiple\":\"\",\"chips\":\"\",\"deletable-chips\":\"\",\"hide-selected\":\"\"},model:{value:(_vm.form.wrTags),callback:function ($$v) {_vm.$set(_vm.form, \"wrTags\", $$v)},expression:\"form.wrTags\"}}),_vm._l((_vm.config.wr_fields),function(item,i){return _c('div',{key:i},[(item.title)?_c('v-text-field',{attrs:{\"label\":item.title,\"rules\":item.required ? [_vm.rules.required({ label: item.title })] : []},model:{value:(_vm.form[(\"wr_\" + (i + 1))]),callback:function ($$v) {_vm.$set(_vm.form, (\"wr_\" + (i + 1)), $$v)},expression:\"form[`wr_${i + 1}`]\"}}):_vm._e()],1)}),_vm._l((_vm.config.brd_upload_cnt),function(i){return _c('div',{staticClass:\"d-flex\"},[_c('v-file-input',{attrs:{\"label\":_vm.fileTitle(i),\"show-size\":\"\",\"disabled\":_vm.form.wrFile && _vm.form.wrFiles[i - 1] ? !_vm.form.wrFiles[i - 1].remove : false},model:{value:(_vm.uploadFiles[i - 1]),callback:function ($$v) {_vm.$set(_vm.uploadFiles, i - 1, $$v)},expression:\"uploadFiles[i - 1]\"}}),(_vm.form.wrFiles && _vm.form.wrFiles[i - 1])?_c('div',[_c('v-checkbox',{attrs:{\"label\":\"삭제\"},on:{\"change\":function($event){_vm.uploadFiles[i - 1] = null}},model:{value:(_vm.form.wrFiles[i - 1].remove),callback:function ($$v) {_vm.$set(_vm.form.wrFiles[i - 1], \"remove\", $$v)},expression:\"form.wrFiles[i - 1].remove\"}})],1):_vm._e()],1)})],2):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <v-container fluid>\r\n        <v-toolbar>\r\n            <v-toolbar-title>{{ pageTitle }}</v-toolbar-title>\r\n            <v-spacer />\r\n            <v-btn @click=\"save\" color=\"primary\" :loading=\"loading\">\r\n                <v-icon left>mdi-pencil</v-icon>\r\n                저장\r\n            </v-btn>\r\n        </v-toolbar>\r\n\r\n        <v-form v-if=\"form\" ref=\"form\" v-model=\"valid\" lazy-validation>\r\n            <v-select\r\n                v-if=\"config.brd_use_category\"\r\n                label=\"카테고리\"\r\n                v-model=\"form.wr_category\"\r\n                :items=\"config.brd_category\"\r\n                :rules=\"[rules.required({ label: '카테고리' })]\"\r\n                :readonly=\"!!parentItem\"\r\n            ></v-select>\r\n            <template v-if=\"!user\">\r\n                <v-text-field\r\n                    label=\"이름\"\r\n                    v-model=\"form.wr_name\"\r\n                    :readonly=\"!!form.wr_id\"\r\n                    :rules=\"rules.name()\"\r\n                />\r\n                <v-text-field\r\n                    label=\"이메일\"\r\n                    v-model=\"form.wr_email\"\r\n                    :rules=\"rules.email()\"\r\n                />\r\n                <input-password\r\n                    label=\"비밀번호\"\r\n                    v-model=\"form.wr_password\"\r\n                    :rules=\"rules.wr_password({ required : !id })\"\r\n                />\r\n                <input-password\r\n                    label=\"비밀번호 확인\"\r\n                    v-model=\"confirmPw\"\r\n                    :rules=\"[rules.matchValue(form.wr_password)]\"\r\n                />\r\n            </template>\r\n\r\n            <v-expansion-panels v-if=\"parentItem\">\r\n                <v-expansion-panel>\r\n                    <v-expansion-panel-header>\r\n                        원글 : {{ parentItem.wr_title }}\r\n                    </v-expansion-panel-header>\r\n                    <v-expansion-panel-content>\r\n                        <ez-tiptap v-model=\"parentItem.wr_content\" :editable=\"false\" />\r\n                    </v-expansion-panel-content>\r\n                </v-expansion-panel>\r\n            </v-expansion-panels>\r\n\r\n            <v-text-field\r\n                label=\"제목\"\r\n                v-model=\"form.wr_title\"\r\n                counter=\"120\"\r\n                :rules=\"[rules.required({ label: '제목' })]\"\r\n            />\r\n\r\n            <ez-tiptap\r\n                :editable=\"true\"\r\n                v-model=\"form.wr_content\"\r\n                @uploadImage=\"uploadImage\"\r\n            />\r\n\r\n            <v-combobox\r\n                label=\"검색태그\"\r\n                v-model=\"form.wrTags\"\r\n                :items=\"tags\"\r\n                multiple\r\n                chips\r\n                deletable-chips\r\n                hide-selected\r\n            />\r\n\r\n            <div v-for=\"(item, i) in config.wr_fields\" :key=\"i\">\r\n                <v-text-field\r\n                    v-if=\"item.title\"\r\n                    :label=\"item.title\"\r\n                    v-model=\"form[`wr_${i + 1}`]\"\r\n                    :rules=\"item.required ? [rules.required({ label: item.title })] : []\"\r\n                />\r\n            </div>\r\n\r\n            <div v-for=\"i in config.brd_upload_cnt\" class=\"d-flex\">\r\n                <v-file-input\r\n                    :label=\"fileTitle(i)\"\r\n                    v-model=\"uploadFiles[i - 1]\"\r\n                    show-size\r\n                    :disabled=\"form.wrFile && form.wrFiles[i - 1] ? !form.wrFiles[i - 1].remove : false\"\r\n                />\r\n                <div v-if=\"form.wrFiles && form.wrFiles[i - 1]\">\r\n                    <v-checkbox \r\n                        v-model=\"form.wrFiles[i - 1].remove\"\r\n                        label=\"삭제\"\r\n                        @change=\"uploadFiles[i - 1] = null\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </v-form>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport validateRules from \"../../../../../util/validateRules\";\r\nimport InputPassword from \"../../../../components/inputForms/InputPassword.vue\";\r\n\r\nexport default {\r\n    components : { InputPassword },\r\n    name : \"GalleryForm\",\r\n    title() {\r\n        return this.pageTitle;\r\n    },\r\n    props : {\r\n        config : Object,\r\n        access : Object,\r\n        id: [String, Number],\r\n    },\r\n    data() {\r\n        return {\r\n            form : null,\r\n            valid : true,\r\n            confirmPw : \"\",\r\n            uploadFiles : Array(this.config.brd_upload_cnt).fill(null),\r\n            tags : [], // TODO : 서버에서 태그 목록을 가져온다.\r\n            loading : false,\r\n            upImages : [],\r\n            isWrite : false, // 작성을 했는지 여부\r\n            parentItem : null, // 부모글\r\n        };\r\n    },\r\n    computed : {\r\n        ...mapState({\r\n            user : (state) => state.user.user,\r\n        }),\r\n        table() {\r\n            return this.config.brd_table;\r\n        },\r\n        pid() {\r\n            if (this.$route.query.act == 'reply') {\r\n                return this.id;\r\n            } else {\r\n                return 0;\r\n            }\r\n        },\r\n        pageTitle() {\r\n            let title = '';\r\n            if (this.pid) {\r\n                title = ' 게시물 답글 작성';\r\n            } else {\r\n                if (this.id) {\r\n                    title = ' 게시물 수정';\r\n                } else {\r\n                    title = ' 게시물 작성';\r\n                }\r\n            }\r\n            return (\r\n                this.config.brd_subject + title\r\n            );\r\n        },\r\n        rules : () => validateRules,\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    },\r\n    destroyed() {\r\n        // 작성을 완료하지 않고 에디터에서 업로드한 이미지가 있으면 삭제를 요청함\r\n        if (!this.isWrite && this.upImages.length) {\r\n            this.$axios.put(`/api/board/imgCancel/${this.table}`, this.upImages);\r\n        }\r\n    },\r\n    methods : {\r\n        async init() {\r\n            if (this.id) {\r\n                const data = await this.$axios.get(`/api/board/detail/${this.table}/${this.id}`);\r\n                if (this.pid) { // 부모글의 답글\r\n                    this.initForm();\r\n                    this.form.wr_category = data.wr_category;\r\n                    this.parentItem = data;\r\n                } else { // 수정\r\n                    this.form = data;\r\n                }\r\n                this.form.wr_password = \"\";\r\n            } else { // 새글\r\n                this.initForm();\r\n            }\r\n        },\r\n        initForm() {\r\n            const form = {\r\n                wr_reply : 0,\r\n                wr_parent : this.pid, // TODO : 나중에 답글 작성할 때 부모글 아이들 넣음\r\n                user_id : this.user ? this.user.user_id : 0, // 0이면 비회원 글 작성임\r\n                wr_email : this.user ? this.user.user_email : \"\",\r\n                wr_name : this.user ? this.user.user_name : \"\",\r\n                wr_password : \"\",\r\n                wr_category : this.$route.query.ca || this.config.brd_category[0] | \"\", // TODO : 링크할 때 카테고리 정보를 넘긴다\r\n                wr_title : \"\",\r\n                wr_content : \"\",\r\n                wrTags : [],\r\n                //wrImgs : [],\r\n                //wrFiles : [],\r\n            };\r\n            for (let i = 1; i <= 10; i++) {\r\n                form[`wr_${i}`] = \"\";\r\n            }\r\n            this.form = form;\r\n        },\r\n        fileTitle(i) {\r\n            // TODO : 수정 할 때 올렸던 파일 이름 요기서 사용할꺼에요\r\n            if (this.form.wrFiles) {\r\n                const wrFile = this.form.wrFiles[i - 1];\r\n                return wrFile && !wrFile.remove ? wrFile.brd_file_name : `첨부파일 ${i}`;\r\n            } else {\r\n                return `첨부파일 ${i}`;   \r\n            }\r\n            \r\n        },\r\n        async uploadImage({ file, desc, callback }) {\r\n            const formData = new FormData();\r\n            formData.append(\"upFile\", file);\r\n            formData.append(\"brd_file_desc\", desc);\r\n            const data = await this.$axios.post(`/api/board/imageUpload/${this.table}`, formData);\r\n            this.upImages.push(data);\r\n            callback(`/upload/${this.table}/${data.brd_file_src}`);\r\n        },\r\n        async save() {\r\n            this.$refs.form.validate();\r\n            await this.$nextTick();\r\n            if (!this.valid) return;\r\n            this.loading = true;\r\n\r\n            const formData = new FormData();\r\n            const keys = Object.keys(this.form);\r\n\r\n            for (const key of keys) {\r\n                if (typeof this.form[key] === \"object\") {\r\n                    formData.append(key, JSON.stringify(this.form[key]));\r\n                } else {\r\n                    formData.append(key, this.form[key]);\r\n                }\r\n            }\r\n\r\n            // 작성시 토큰이 있는 경우 토큰을 삽입\r\n            if (this.$route.query.token) {\r\n                formData.append('token', this.$route.query.token);\r\n            }\r\n\r\n            let cnt = 0;\r\n            for (let i = 0; i < this.config.brd_upload_cnt; i++) {\r\n                if (this.uploadFiles[i] != null) {\r\n                    formData.append(`upFiles[${cnt}`, this.uploadFiles[i]);\r\n                    cnt++;\r\n                }\r\n            }\r\n\r\n            // 에디터에서 업로드한 이미지\r\n            formData.append('upImages', JSON.stringify(this.upImages));\r\n\r\n            let wr_id;\r\n            if (this.id && !this.pid) {\r\n                wr_id = await this.update(formData);\r\n            } else {\r\n                wr_id = await this.insert(formData);\r\n            }\r\n\r\n            // 글 작성이 잘 끝났으면\r\n            if (wr_id) {\r\n                this.isWrite = true;\r\n                this.$router.push(`/board/${this.table}/${wr_id}`);\r\n            }\r\n\r\n            this.loading = false;\r\n        },\r\n        async insert(formData) {\r\n            const data = await this.$axios.post(`/api/board/write/${this.table}`, formData);\r\n            return data.wr_id;\r\n        },\r\n        async update(formData) {\r\n            const data = await this.$axios.put(`/api/board/write/${this.table}/${this.id}`, formData);\r\n            return data.wr_id;\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=5cfbda1c&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}