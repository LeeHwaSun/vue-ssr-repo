(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admBoard","error"],{"385a":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return"list"===t.action?e("board-list"):"form"===t.action?e("board-form",{attrs:{table:t.table}}):e("error")},s=[],l=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{staticClass:"mt-2"},[e("v-toolbar-title",[t._v("게시판 관리")]),e("v-spacer"),e("tooltip-btn",{attrs:{label:"게시판 추가",icon:"",to:"/adm/board/form"}},[e("v-icon",[t._v("mdi-plus")])],1)],1),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,options:t.options,"server-items-length":t.totalItems,loading:t.loading,"hide-default-footer":""},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.brd_subject",fn:function({item:r}){return[e("v-btn",{staticClass:"ma-0 pa-0 justify-start",attrs:{text:"",to:"/board/"+r.brd_table}},[t._v(t._s(r.brd_subject))])]}},{key:"item.cmd",fn:function({item:r}){return[e("v-btn",{attrs:{icon:"",to:"/adm/board/form/"+r.brd_table,color:"primary"}},[e("v-icon",[t._v("mdi-pencil")])],1),t.isSuper?e("v-btn",{attrs:{icon:"",loading:t.btnLoading,color:"error"},on:{click:function(e){return t.removeBoard(r)}}},[e("v-icon",[t._v("mdi-delete")])],1):t._e()]}}])}),e("v-pagination",{staticClass:"mt-4",attrs:{length:t.pageCount},model:{value:t.options.page,callback:function(e){t.$set(t.options,"page",e)},expression:"options.page"}})],1)},i=[],o=r("ed2f"),n=r("64f2"),d=r("4328"),c=r.n(d),b=r("2f62"),m={components:{TooltipBtn:o["a"]},name:"AdmBoardList",title:"게시판 관리",data(){return{headers:[{text:"테이블",value:"brd_table",sortable:!0},{text:"이름",value:"brd_subject",sortable:!0},{text:"스킨",value:"brd_skin",sortable:!0},{text:"목록",value:"brd_list_level",sortable:!1},{text:"읽기",value:"brd_read_level",sortable:!1},{text:"쓰기",value:"brd_write_level",sortable:!1},{text:"덧글",value:"brd_comment_level",sortable:!1},{text:"CMD",value:"cmd",sortable:!1}],items:[],options:{},totalItems:0,loading:!1,btnLoading:!1,pageItems:[2,5,10]}},computed:{...Object(b["c"])("user",["isSuper"]),pageCount(){return Math.ceil(this.totalItems/this.options.itemsPerPage)}},created(){this.options=this.initOptions()},watch:{options:{handler(){this.getDataFromApi()},deep:!0}},methods:{initOptions(){const{query:t}=this.$route,e={page:Number(t.page)||1,itemsPerPage:Number(t.itemsPerPage)||10};return e},async getDataFromApi(){this.loading=!0;const t=Object(n["deepCopy"])(this.options),e=c.a.stringify(t),r=await this.$axios.get("/api/admin/board?"+e);r&&(this.items=r.items,this.totalItems=r.totalItems),this.loading=!1},async removeBoard(t){const e=await this.$myNotify.confirm(`[ ${t.brd_subject} ] 게시판을 삭제 하시겠습니까?`,"게시판 삭제",{icon:"mdi-alert"});if(!e)return;this.btnLoading=!0;const r=await this.$axios.delete("/api/admin/board/"+t.brd_table);this.btnLoading=!1,r&&(this.$toast.info(`${t.brd_subject} 게시판 삭제 완료.(파일 : ${r.fileCnt}, 태그 : ${r.tagCnt}, 좋아요 : ${r.goodCnt})`),this.getDataFromApi())}}},u=m,_=r("2877"),p=Object(_["a"])(u,l,i,!1,null,null,null),v=p.exports,f=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-toolbar",{staticClass:"mt-2 mb-2"},[e("v-toolbar-title",[t._v(t._s(t.pageTitle))]),e("v-spacer"),e("v-btn",{attrs:{to:"/adm/board/list",color:"accent"}},[t._v("List")]),e("v-btn",{staticClass:"ml-2",attrs:{color:"primary"},on:{click:t.save}},[t._v(t._s(t.btnLabel))])],1),t.form?e("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-text-field",{attrs:{label:"게시판 ID",counter:"30",readonly:!!t.table,rules:[t.rules.alphaNum(),t.rules.required({label:"게시판 ID"})]},model:{value:t.form.brd_table,callback:function(e){t.$set(t.form,"brd_table",e)},expression:"form.brd_table"}}),e("v-text-field",{attrs:{label:"게시판 제목",counter:"100",rules:[t.rules.required({label:"게시판 제목"})]},model:{value:t.form.brd_subject,callback:function(e){t.$set(t.form,"brd_subject",e)},expression:"form.brd_subject"}}),e("v-select",{attrs:{label:"게시판 스킨",items:t.skins},model:{value:t.form.brd_skin,callback:function(e){t.$set(t.form,"brd_skin",e)},expression:"form.brd_skin"}}),e("board-sort",{staticClass:"mb-4",attrs:{items:t.form.brd_sort}}),e("div",{staticClass:"d-flex"},[e("v-switch",{attrs:{label:"카테고리 사용",inset:""},model:{value:t.form.brd_use_category,callback:function(e){t.$set(t.form,"brd_use_category",e)},expression:"form.brd_use_category"}}),e("div",{staticClass:"ml-3",staticStyle:{flex:"1"}},[e("v-combobox",{attrs:{label:"카테고리",multiple:"",chips:"",disabled:!t.form.brd_use_category,dense:"","deletable-chips":"",clearable:"","append-icon":"",hint:"카테고리 입력 후 Enter로 구분 등록 하세요."},scopedSlots:t._u([{key:"selection",fn:function({attrs:r,item:a,parent:s,selected:l}){return[e("v-chip",t._b({attrs:{"input-value":l,label:"",small:""}},"v-chip",r,!1),[e("span",[t._v(t._s(a))]),e("v-icon",{attrs:{small:"",right:""},on:{click:function(t){return s.selectItem(a)}}},[t._v("mdi-close")])],1)]}}],null,!1,1391295223),model:{value:t.form.brd_category,callback:function(e){t.$set(t.form,"brd_category",e)},expression:"form.brd_category"}})],1)],1),e("board-slider",{attrs:{label:"목록 읽기 레벨"},model:{value:t.form.brd_list_level,callback:function(e){t.$set(t.form,"brd_list_level",e)},expression:"form.brd_list_level"}}),e("board-slider",{attrs:{label:"게시물 읽기 레벨"},model:{value:t.form.brd_read_level,callback:function(e){t.$set(t.form,"brd_read_level",e)},expression:"form.brd_read_level"}}),e("board-slider",{attrs:{label:"게시물 쓰기 레벨"},model:{value:t.form.brd_write_level,callback:function(e){t.$set(t.form,"brd_write_level",e)},expression:"form.brd_write_level"}}),e("board-slider",{attrs:{label:"답변글 쓰기 레벨"},model:{value:t.form.brd_reply_level,callback:function(e){t.$set(t.form,"brd_reply_level",e)},expression:"form.brd_reply_level"}}),e("board-slider",{attrs:{label:"댓글 쓰기 레벨"},model:{value:t.form.brd_comment_level,callback:function(e){t.$set(t.form,"brd_comment_level",e)},expression:"form.brd_comment_level"}}),e("board-slider",{attrs:{label:"파일 다운로드 레벨"},model:{value:t.form.brd_download_level,callback:function(e){t.$set(t.form,"brd_download_level",e)},expression:"form.brd_download_level"}}),e("div",{staticClass:"d-flex"},[e("v-slider",{attrs:{label:"파일 업로드 개수 : "+t.form.brd_upload_cnt,min:"0",max:"10","thumb-label":"",ticks:""},model:{value:t.form.brd_upload_cnt,callback:function(e){t.$set(t.form,"brd_upload_cnt",e)},expression:"form.brd_upload_cnt"}}),e("v-sheet",{staticClass:"ml-2",staticStyle:{background:"transparent"},attrs:{width:"200"}},[e("v-text-field",{attrs:{type:"number",label:"파일 업로드 용량",dense:"","hide-details":"",min:"1",max:"500",suffix:"MiB"},model:{value:t.form.brd_upload_size,callback:function(e){t.$set(t.form,"brd_upload_size",e)},expression:"form.brd_upload_size"}})],1)],1),e("v-expansion-panels",{attrs:{focusable:""}},[e("v-expansion-panel",[e("v-expansion-panel-header",[t._v(" 게시물 추가 필드 설정 ")]),e("v-expansion-panel-content",t._l(t.form.wr_fields,(function(r,a){return e("div",{key:a,staticClass:"d-flex"},[e("v-tooltip",{attrs:{top:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("div",t._g(t._b({staticClass:"mt-2 mr-2"},"div",s,!1),a),[e("v-switch",{attrs:{dense:"",inset:""},model:{value:r.required,callback:function(e){t.$set(r,"required",e)},expression:"item.required"}})],1)]}}],null,!0)},[e("span",[t._v("필수 입력")])]),e("v-text-field",{attrs:{label:"추가 필드 "+(a+1),"hide-details":""},model:{value:r.title,callback:function(e){t.$set(r,"title",e)},expression:"item.title"}})],1)})),0)],1),e("v-expansion-panel",[e("v-expansion-panel-header",[t._v(" 게시판 여분 필드 ")]),e("v-expansion-panel-content",t._l(10,(function(r){return e("v-text-field",{key:r,attrs:{label:"여분 필드 "+r},model:{value:t.form["brd_"+r],callback:function(e){t.$set(t.form,"brd_"+r,e)},expression:"form[`brd_${i}`]"}})})),1)],1)],1)],1):t._e(),e("v-toolbar",{staticClass:"mt-4"},[e("v-btn",{attrs:{to:"/adm/board/list",color:"accent"}},[t._v("List")]),e("v-spacer"),e("v-btn",{attrs:{color:"primary"},on:{click:t.save}},[t._v(t._s(t.btnLabel))])],1)],1)},h=[],x=r("bb5e"),g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pt-4 mt-4 mb_n4",staticStyle:{position:"relative"}},[e("div",{staticClass:"text-subtitle1",staticStyle:{position:"absolute",left:"0",top:"-8px"}},[e("span",{staticClass:"grey--text"},[t._v(t._s(t.label))]),e("span",{staticClass:"text-body-2 ml-2"},[t._v(t._s(t.LV_LABEL(t.value))+" ("+t._s(t.value)+")")])]),e("v-slider",{attrs:{value:t.value,min:t.LV.BLOCK,max:t.LV.SUPER,ticks:"always","tick-size":"1","thumb-label":""},on:{input:function(e){return t.$emit("input",e)}}})],1)},y=[],w={name:"BoardSlider",model:{prop:"value",event:"input"},props:{value:Number,label:String},computed:{LV:()=>x["LV"],LV_LABEL:()=>x["LV_LABEL"]}},k=w,$=Object(_["a"])(k,g,y,!1,null,null,null),C=$.exports,L=function(){var t=this,e=t._self._c;return e("div",[e("v-subheader",[t._v("정렬 규칙 설정")]),e("draggable",t._b({staticClass:"menu-drag-container",attrs:{tag:"div",list:t.items,handle:".handle"}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.items,(function(r,a){return e("div",{key:r.by,staticClass:"item-group"},[e("div",[e("v-sheet",{staticClass:"item d-flex pa-4 pt-6",attrs:{outlined:"",rounded:"",elevation:"2"}},[e("div",{staticClass:"handle"},[e("v-icon",[t._v("mdi-drag")])],1),e("v-text-field",{staticClass:"ml-4",attrs:{label:"정렬규칙 "+(a+1),readonly:"",dense:"","hide-details":""},model:{value:r.by,callback:function(e){t.$set(r,"by",e)},expression:"item.by"}}),e("v-select",{staticClass:"ml-2",attrs:{label:"sort",items:t.descItems,dense:"","hide-details":""},model:{value:r.desc,callback:function(e){t.$set(r,"desc",e)},expression:"item.desc"}}),e("tooltip-btn",{attrs:{label:"규칙 제거",icon:""},on:{click:function(e){return t.removeItem(a)}}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1)])})),0)],1),e("v-form",{ref:"form",staticClass:"d-flex mt-4 px-2",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.addItem.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-autocomplete",{attrs:{label:"정렬 규칙",items:t.wrItems,dense:"","prepend-icon":"mdi-sort",rules:[t.rules.required({label:"정렬규칙"})]},model:{value:t.form.by,callback:function(e){t.$set(t.form,"by",e)},expression:"form.by"}}),e("v-select",{staticClass:"ml-2",attrs:{label:"sort",items:t.descItems,dense:""},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}}),e("tooltip-btn",{attrs:{label:"정렬 규칙 추가",icon:"",type:"submit"}},[e("v-icon",[t._v("mdi-plus")])],1)],1),e("v-divider",{staticClass:"my-4"})],1)},B=[],S=r("b76a"),O=r.n(S),j=r("248f"),I=r.n(j),V={components:{draggable:O.a,TooltipBtn:o["a"]},name:"BoardSort",props:{items:{type:Array,required:!0}},data(){return{valid:!0,form:{by:"",desc:0},descItems:[{text:"내림차순(DESC)",value:0},{text:"오름차순(ASC)",value:1}]}},computed:{dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}},wrItems(){const t=["wr_id","wr_reply","wr_grp","wr_order","wr_dep","wr_parent","user_id","wr_email","wr_name","wr_password","wr_category","wr_title","wr_content","wr_view","wr_ip","wr_create_at","wr_update_at","wr_1","wr_2","wr_3","wr_4","wr_5","wr_6","wr_7","wr_8","wr_9","wr_10"],e=[];for(const r of this.items)e.push(r.by);return t.filter(t=>e.indexOf(t)<0)},rules:()=>I.a},mounted(){this.initForm()},methods:{initForm(){this.form={by:"",desc:0}},async addItem(){this.$refs.form.validate(),await this.$nextTick(),this.valid&&(this.items.push(this.form),this.initForm(),this.$refs.form.resetValidation())},removeItem(t){this.items.splice(t,1)}}},A=V,q=Object(_["a"])(A,L,B,!1,null,null,null),F=q.exports,N={components:{BoardSlider:C,BoardSort:F},name:"AdmBoardForm",props:{table:String},title(){return this.pageTitle},data(){return{valid:!0,form:null,skins:[]}},computed:{pageTitle(){return this.table?this.table+" 게시판 수정":"게시판 생성"},btnLabel(){return this.table?"Modify":"Create"},rules:()=>I.a},mounted(){this.init(),this.fetchSkinList()},methods:{async init(){if(this.table){const t=await this.$axios.get("/api/admin/board/"+this.table);t.brd_category=JSON.parse(t.brd_category),t.brd_sort=JSON.parse(t.brd_sort),t.wr_fields=JSON.parse(t.wr_fields),this.form=t}else{const t={brd_table:"",brd_subject:"",brd_skin:"basic",brd_list_level:x["LV"].BLOCK,brd_read_level:x["LV"].BLOCK,brd_write_level:x["LV"].BLOCK,brd_reply_level:x["LV"].BLOCK,brd_comment_level:x["LV"].BLOCK,brd_download_level:x["LV"].BLOCK,brd_upload_cnt:2,brd_upload_size:2,brd_category:[],brd_use_category:0,brd_sort:[{by:"wr_grp",desc:0},{by:"wr_order",desc:1}],wr_fields:[]};for(let e=1;e<=10;e++)t["brd_"+e]="",t.wr_fields.push({title:"",required:0});this.form=t}},async fetchSkinList(){const t=await this.$axios.get("/api/admin/board/skinList");this.skins=t},async save(){if(this.$refs.form.validate(),await this.$nextTick(),!this.valid)return;let t=!1,e="";this.table?(t=await this.$axios.put("/api/admin/board/"+this.table,this.form),e="수정"):(t=await this.$axios.post("/api/admin/board",this.form),e="생성"),t&&(this.$toast.info(`${this.form.brd_subject} 게시판을 ${e}하였습니다.`),this.$router.push("/adm/board/list"))}}},D=N,E=Object(_["a"])(D,f,h,!1,null,null,null),T=E.exports,z=r("dda8"),K={components:{BoardList:v,BoardForm:T,Error:z["default"]},name:"AdmBoardRenderer",computed:{match(){return this.$route.params.pathMatch.split("/")},action(){return this.match[0]},table(){return this.match[1]||null}},mounted(){console.log(this.$route)}},P=K,J=Object(_["a"])(P,a,s,!1,null,null,null);e["default"]=J.exports},dda8:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[t._v(" 404 Not Found ")])},s=[],l={name:"Error",title:"에러페이지"},i=l,o=r("2877"),n=Object(o["a"])(i,a,s,!1,null,null,null);e["default"]=n.exports},ed2f:function(t,e,r){"use strict";var a=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:r,attrs:a}){return[e("v-btn",t._g(t._b({class:t.childClass,attrs:{icon:""},on:{click:function(e){return t.$emit("click")}}},"v-btn",{...t.$attrs,...a},!1),r),[t._t("default")],2)]}}],null,!0)},[e("span",[t._v(t._s(t.label))])])},s=[],l={name:"TooltipBtn",props:{label:{type:String,required:!0},childClass:[String,Object]}},i=l,o=r("2877"),n=Object(o["a"])(i,a,s,!1,null,null,null);e["a"]=n.exports}}]);
//# sourceMappingURL=admBoard.46d57aaa.js.map