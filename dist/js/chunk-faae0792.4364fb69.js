(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-faae0792","chunk-3d500560","chunk-2d221b59"],{"0e63":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("v-card-text",[e("comment-form",{attrs:{wr_reply:t.id,table:t.table,parent:0},on:{onUpdate:t.updateItem}}),e("v-list",[t._l(t.items,(function(i,s){return e("comment-item",{key:i.wr_id,attrs:{item:i,idx:s,table:t.table,access:t.access},on:{onReComment:t.reComment,onUpdate:t.updateItem,onRemove:t.removeItem}})})),t.loading?e("v-list-item",[e("v-list-item-content",[e("v-progress-circular",{attrs:{value:20,indeterminate:""}})],1)],1):e("div",{directives:[{name:"intersect",rawName:"v-intersect",value:t.onIntersect,expression:"onIntersect"}]})],2)],1)},a=[],o=i("cc03"),r=function(){var t=this,e=t._self._c;return e("div",[e("v-divider"),e("v-list-item",{staticClass:"align-start"},[e("div",{staticStyle:{position:"relative",top:"22px",left:"-4px"}},[t.item.wr_dep>0?e("v-icon",{style:{"padding-left":32*(t.item.wr_dep-1)+8+"px"}},[t._v(" mdi-subdirectory-arrow-right ")]):t._e()],1),e("v-list-item-content",[e("v-subheader",{staticClass:"pl-0"},[e("v-avatar",{staticClass:"white--text",attrs:{size:"28",color:"primary"}},[t._v(t._s(t.item.wr_name[0]))]),e("div",{staticClass:"ml-2 font-weight-bold"},[t._v(" "+t._s(t.item.wr_name)+" | "),e("i",[t._v(t._s(t.item.wr_email))])]),e("v-spacer"),e("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-clock-outline")]),e("display-time",{attrs:{time:t.item.wr_create_at}}),e("display-good",{staticClass:"ml-4",attrs:{item:t.item,table:t.table,label:{good:"좋아요",bad:"싫어요"},icon:{good:"mdi-thumb-up",bad:"mdi-thumb-down"},"good-only":"",btnProps:{plain:!0}}})],1),t.isModify?e("comment-form",{attrs:{item:t.item,table:t.table,wr_reply:t.item.wr_reply,wr_parent:t.item.wr_parent},on:{onClose:function(e){t.isModify=!1},onUpdate:t.modifyComment}}):e("div",{staticClass:"text-pre",style:{"font-size":"1.25em","line-height":"1.5em"}},[t._v(t._s(t.item.wr_content))]),e("div",{staticClass:"d-flex"},[t.access.comment&&t.user?e("board-button",{attrs:{label:"답글쓰기",icon:"mdi-pencil-outline",plain:"",color:"primary"},on:{click:function(e){t.isComment=!0}}}):t._e(),e("v-spacer"),t.modifyGrant?e("board-button",{attrs:{label:"수정",icon:"mdi-pencil-outline",plain:"",color:"secondary"},on:{click:function(e){t.isModify=!t.isModify}}}):t._e(),t.modifyGrant?e("board-button",{attrs:{label:"삭제",icon:"mdi-delete-outline",plain:"",color:"red"},on:{click:t.removeComment}}):t._e()],1),t.isComment?e("comment-form",{attrs:{wr_parent:t.item.wr_id,wr_reply:t.item.wr_reply,table:t.table},on:{onClose:function(e){t.isComment=!1},onUpdate:t.reComment}}):t._e()],1)],1)],1)},n=[],l=i("d3f8"),d=i("94b5"),c=i("c117"),m=i("2f62"),u=i("bb5e"),p={components:{DisplayTime:l["a"],BoardButton:d["a"],CommentForm:o["default"],DisplayGood:c["a"]},name:"CommentItem",props:{item:{type:Object,required:!0},table:{type:String,required:!0},idx:{type:Number,required:!0},access:{type:Object,required:!0}},data(){return{isComment:!1,isModify:!1}},computed:{...Object(m["e"])("user",["user"]),...Object(m["c"])("user",["GRANT"]),modifyGrant(){return!(!this.user||!(this.user.user_id==this.item.user_id||this.GRANT>=u["LV"].SUPER))}},methods:{reComment(t){this.$emit("onReComment",this.item,t)},modifyComment(t){this.$emit("onUpdate",t)},async removeComment(){const t=await this.$myNotify.confirm("댓글을 삭제하시겠습니까?","댓글 삭제",{icon:"mdi-alert"});if(!t)return;const e=await this.$axios.delete(`/api/board/${this.table}/${this.item.wr_id}`);e&&(this.$toast.info(e+"개의 댓글을 삭제 하였습니다."),this.$emit("onRemove",this.item,e))}}},b=p,f=i("2877"),h=Object(f["a"])(b,r,n,!1,null,null,null),_=h.exports,v={components:{CommentForm:o["default"],CommentItem:_},name:"CommentList",props:{table:{type:String,required:!0},id:{type:Number,required:!0},access:{type:Object,required:!0}},data(){return{loading:!1,items:[],totalItems:0,options:{itemsPerPage:5,limitStart:0,sortBy:["wr_grp","wr_order"],sortDesc:[!1,!0],stf:["wr_reply"],stc:["eq"],stx:[this.id]},item:null}},mounted(){this.fetchData()},methods:{async fetchData(){this.loading=!0;const t=await this.$axios.get("/api/board/list/"+this.table,{params:this.options});t&&this.setData(t),setTimeout(()=>{this.loading=!1},2e3)},setData(t){this.items=[...this.items,...t.items],this.totalItems=t.totalItems,this.options.limitStart+=this.options.itemsPerPage},updateItem(t){const e=this.items.find(e=>e.wr_id==t.wr_id);if(e){const i=this.items.indexOf(e);this.items.splice(i,1,t)}else this.items.unshift(t),this.totalItems++,this.options.limitStart++},reComment(t,e){const i=this.items.find(e=>e.wr_id==t.wr_id);if(i){const t=this.items.indexOf(i);this.items.splice(t+1,0,e),this.totalItems++,this.options.limitStart++}},onIntersect(t,e){this.items.length<this.totalItems&&t[0].isIntersecting&&(console.log("onIntersect",this.options),this.fetchData())},removeItem(t,e){const i=this.items.indexOf(t);i>=0&&(this.items.splice(i,e),this.totalItems-=e,this.options.limitStart-=e)}}},w=v,y=Object(f["a"])(w,s,a,!1,null,null,null);e["default"]=y.exports},"2f90":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[e("v-card",[e("v-toolbar",t._b({},"v-toolbar",t.$attrs,!1),[e("v-toolbar-title",[t._v(t._s(t.label))]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:t.close}},[e("v-icon",[t._v("mdi-close")])],1)],1),e("v-card-text",[t._t("default")],2)],1)],1)},a=[],o={name:"MyDialog",props:{label:{type:String,required:!0}},data(){return{dialog:!1}},methods:{open(){this.$emit("onOpen"),this.dialog=!0},close(){this.$emit("onClose"),this.dialog=!1}}},r=o,n=i("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},7714:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return t.isClient?e("div",[t._t("default")],2):e("div",{staticClass:"d-none"},[t._t("server")],2)},a=[],o={name:"SsrRenderer",data(){return{isClient:!1}},mounted(){this.isClient=!0}},r=o,n=i("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},"94b5":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-btn",t._b({attrs:{small:t.breakPointXS},on:{click:function(e){return t.$emit("click")}}},"v-btn",t.$attrs,!1),[e("v-icon",{attrs:{left:!t.breakPointXS}},[t._v(t._s(t.icon))]),t.breakPointXS?t._e():e("div",[t._v(t._s(t.label))])],1)},a=[],o={name:"BoardButton",props:{label:{type:String,default:""},icon:{type:String,default:""}},computed:{breakPointXS(){return this.$vuetify.breakpoint.xs}}},r=o,n=i("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},c117:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",t._b({},"div",t.$attrs,!1),[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({attrs:{color:t.goodColor},on:{click:function(e){return e.stopPropagation(),t.goodUpdate(1)}}},"v-btn",{...s,...t.btnProps},!1),i),[e("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon.good))]),t._v(" "+t._s(t.good)+" ")],1)]}}])},[e("span",[t._v(t._s(t.label.good))])]),t.goodOnly?t._e():e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("v-btn",t._g(t._b({attrs:{color:t.badColor},on:{click:function(e){return e.stopPropagation(),t.goodUpdate(2)}}},"v-btn",{...s,...t.btnProps},!1),i),[e("v-icon",{attrs:{left:""}},[t._v(t._s(t.icon.bad))]),t._v(" "+t._s(t.bad)+" ")],1)]}}],null,!1,189465039)},[e("span",[t._v(t._s(t.label.bad))])])],1)},a=[],o=i("2f62"),r={name:"DisplayGood",props:{item:{type:Object,required:!0},table:{type:String,required:!0},btnProps:{type:Object,default:null},icon:{type:Object,default:()=>({good:"mdi-heart-outline",bad:"mdi-heart-broken-outline"})},label:{type:Object,default:{good:"좋아요",bad:"싫어요"}},goodOnly:{type:Boolean,default:!1}},data(){return{goodFlag:this.item.goodFlag,good:this.item.good,bad:this.item.bad}},computed:{...Object(o["e"])("user",["user"]),goodColor(){return 1==this.goodFlag?"primary":""},badColor(){return 2==this.goodFlag?"error":""}},methods:{async goodUpdate(t){if(!this.user)return void this.$toast.error("회원만 사용 할 수 있습니다.");let e;e=t==this.goodFlag?await this.$axios.delete(`/api/good/${this.table}/${this.item.wr_id}`):await this.$axios.post(`/api/good/${this.table}/${this.item.wr_id}`,{brd_good_flag:t}),e&&(this.goodFlag=e.goodFlag,this.good=e.good,this.bad=e.bad)}}},n=r,l=i("2877"),d=Object(l["a"])(n,s,a,!1,null,null,null);e["a"]=d.exports},cc03:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return t.user?e("div",[e("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-textarea",{ref:"textarea",attrs:{outlined:"",label:t.label,rules:[t.rules.required({label:t.label})],rows:"2","auto-grow":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.save.apply(null,arguments):null},blur:t.resetValid},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t.item||t.wr_parent?e("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("onClose")}}},[e("v-icon",[t._v("mdi-close")])],1):t._e(),e("v-btn",{attrs:{icon:""},on:{click:t.save}},[e("v-icon",[t._v("mdi-pencil")])],1)]},proxy:!0}],null,!1,575172357),model:{value:t.form.wr_content,callback:function(e){t.$set(t.form,"wr_content","string"===typeof e?e.trim():e)},expression:"form.wr_content"}})],1)],1):e("div",[t._v(" 로그인 후 댓글을 작성할 수 있습니다. "),e("v-btn",{attrs:{to:"/login?nextUrl="+t.$route.fullPath}},[t._v("로그인")])],1)},a=[],o=i("2f62"),r=i("64f2"),n=i("248f"),l=i.n(n),d={name:"CommentForm",props:{table:{type:String,required:!0},wr_reply:{type:Number,required:!0},wr_parent:{type:Number,default:0},item:{type:Object,default:null}},data(){return{valid:!0,form:null}},computed:{...Object(o["e"])({user:t=>t.user.user}),rules:()=>l.a,label(){return this.item?"댓글 수정":0==this.wr_parent?"댓글 작성":"답글 달기"}},created(){this.initForm()},methods:{initForm(){if(this.user)if(this.item)this.form=Object(r["deepCopy"])(this.item);else{const t={wr_reply:this.wr_reply,wr_parent:this.wr_parent,user_id:this.user.user_id,wr_email:this.user.user_email,wr_name:this.user.user_name,wr_content:""};this.form=t}},async save(){if(this.$refs.form.validate(),await this.$nextTick(),!this.valid)return;let t;t=this.item?await this.$axios.put(`/api/board/write/${this.table}/${this.item.wr_id}`,this.form):await this.$axios.post("/api/board/write/"+this.table,this.form),t&&(this.item||this.$refs.textarea.blur(),this.$emit("onUpdate",t),this.initForm(),this.$refs.form.resetValidation(),this.$emit("onClose"))},resetValid(){this.$refs.form.resetValidation()}}},c=d,m=i("2877"),u=Object(m["a"])(c,s,a,!1,null,null,null);e["default"]=u.exports},d3f8:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e("span",t._g(t._b({},"span",s,!1),i),[t._v(" "+t._s(t.display)+" ")])]}}])},[t._v(" "+t._s(t.formatTime)+" ")])},a=[],o={name:"DisplayTime",props:{time:{type:String,required:!0}},computed:{formatTime(){return this.$moment(this.time).format("LLL")},display(){const t=this.$moment(this.time),e=this.$moment(),i=e.diff(t,"days");return i>0?t.format("LL"):t.fromNow()}}},r=o,n=i("2877"),l=Object(n["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},d646:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("v-container",{attrs:{fluid:""}},[t.item?e("v-card",{attrs:{flat:""}},[e("v-card-title",[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[t._v(t._s(t.item.wr_title))]),e("v-spacer"),e("v-subheader",{staticClass:"text-no-wrap"},[e("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-account")]),t._v(" "+t._s(t.item.wr_name)+" "),e("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-clock-outline")]),e("i",[e("display-time",{attrs:{time:t.item.wr_create_at}})],1),e("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-eye")]),t._v(" "+t._s(t.item.wr_view)+" ")],1)],1)],1),e("v-card-text",[e("ssr-renderer",{scopedSlots:t._u([{key:"server",fn:function(){return[e("div",{domProps:{innerHTML:t._s(t.item.wr_content)}})]},proxy:!0}],null,!1,3945286292)},[[e("ez-tiptap",{attrs:{editable:!1},model:{value:t.item.wr_content,callback:function(e){t.$set(t.item,"wr_content",e)},expression:"item.wr_content"}})]],2)],1),e("v-card-text",[e("tag-view",{attrs:{tags:t.item.wrTags}})],1),e("v-card-text",[e("display-good",{staticClass:"d-flex justify-center",attrs:{table:t.table,item:t.item,icon:{good:"mdi-thumb-up",bad:"mdi-thumb-down"},label:{good:"LIKE",bad:"UNLIKE"},"good-only":""}})],1),e("v-card-text",[e("file-download",{attrs:{table:t.table,item:t.item,access:t.access}})],1),e("v-card-actions",[e("v-col",{staticClass:"text-no-wrap",attrs:{cols:"4"}},["MODIFY"==t.isModify?e("board-button",{attrs:{color:"info",to:`/board/${t.table}/${t.item.wr_id}?act=write`,label:"수정",icon:"mdi-pencil"}}):t._e(),"NO_MEMBER"==t.isModify?e("modify-button",{attrs:{color:"info",table:t.table,wr_id:t.item.wr_id,label:"수정"},on:{onValid:t.modifyItem}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-pencil")]),t._v(" 수정 ")],1):t._e(),"MODIFY"==t.isModify?e("board-button",{staticClass:"ml-2",attrs:{color:"error",label:"삭제",icon:"mdi-delete",loading:t.deleteLoading},on:{click:t.deleteItem}}):t._e(),"NO_MEMBER"==t.isModify?e("modify-button",{staticClass:"ml-2",attrs:{color:"error",table:t.table,wr_id:t.item.wr_id,label:"삭제"},on:{onValid:t.deleteItem}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" 삭제 ")],1):t._e()],1),e("v-col",{staticClass:"text-center text-no-wrap",attrs:{cols:"4"}},[e("board-button",{attrs:{to:"/board/"+t.table,color:"accent",label:"목록",icon:"mdi-menu"}})],1),e("v-col",{staticClass:"text-right text-no-wrap",attrs:{cols:"4"}},[t.access.reply?e("board-button",{attrs:{color:"secondary",to:`/board/${t.table}/${t.item.wr_id}?act=reply`,label:"답글쓰기",icon:"mdi-subdirectory-arrow-right"}}):t._e(),t.access.write?e("board-button",{staticClass:"ml-2",attrs:{color:"primary",to:`/board/${t.table}?act=write`,label:"글쓰기",icon:"mdi-pencil"}}):t._e()],1)],1),e("comment-list",{attrs:{id:t.item.wr_id,table:t.table,access:t.access}})],1):t._e()],1)},a=[],o=i("2f62"),r=i("bb5e"),n=i("7714"),l=i("d3f8"),d=function(){var t=this,e=t._self._c;return e("v-chip-group",t._l(t.tags,(function(i){return e("v-chip",{key:i,attrs:{label:""}},[t._v(t._s(i))])})),1)},c=[],m={name:"TagView",props:{tags:{type:Array,default:[]}}},u=m,p=i("2877"),b=Object(p["a"])(u,d,c,!1,null,null,null),f=b.exports,h=function(){var t=this,e=t._self._c;return e("div",t._l(t.wrFiles,(function(i){return e("v-btn",{key:i.brd_file_id,staticClass:"mt-1 text-none",attrs:{block:"",disabled:!t.access.download,href:`/api/board/download/${t.table}/${i.brd_file_name}?src=111111${i.brd_file_src}`,target:"_blank"}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-download")]),t._v(" "+t._s(i.brd_file_name)+" "),e("v-spacer"),t._v(" "+t._s(t.fileSize(i.brd_file_size))+" ")],1)})),1)},_=[],v=i("64f2"),w={name:"FileDownload",props:["table","item","access"],computed:{wrFiles(){return this.item.wrFiles||[]},fileSize:()=>v["fileSize"]}},y=w,g=Object(p["a"])(y,h,_,!1,null,null,null),$=g.exports,x=i("94b5"),C=i("c117"),k=function(){var t=this,e=t._self._c;return e("span",[e("v-btn",t._b({attrs:{loading:t.loading},on:{click:t.openDialog}},"v-btn",t.$attrs,!1),[t._t("default")],2),e("my-dialog",{ref:"dialog",attrs:{width:"400",label:"게시물 "+t.label,persistent:""},on:{onClose:t.closeDialog}},[e("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.checkPass.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("input-password",{staticClass:"mt-4",attrs:{label:"비밀번호",rules:t.rules.wr_password(),"prepend-icon":"mdi-key"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("v-btn",{staticClass:"mt-2",attrs:{type:"submit",block:"",color:"primary"}},[t._v("비밀번호 확인")])],1)],1)],1)},O=[],S=i("056e"),I=i("2f90"),j=i("248f"),D=i.n(j),M={components:{MyDialog:I["a"],InputPassword:S["a"]},name:"ModifyButton",inheritAttrs:!1,props:{table:{type:String,required:!0},wr_id:{type:Number,required:!0},label:{type:String,required:!0}},data(){return{loading:!1,password:"",valid:!0}},computed:{rules:()=>D.a},methods:{openDialog(){this.loading=!0,this.$refs.dialog.open()},closeDialog(){this.loading=!1},async checkPass(){if(this.$refs.form.validate(),await this.$nextTick(),!this.valid)return;const t=await this.$axios.post(`/api/board/check/${this.table}/${this.wr_id}`,{password:this.password});t&&(this.$emit("onValid",t.token),this.$refs.dialog.close())}}},P=M,F=Object(p["a"])(P,k,O,!1,null,null,null),N=F.exports,T=i("0e63"),L={components:{SsrRenderer:n["a"],DisplayTime:l["a"],TagView:f,FileDownload:$,BoardButton:x["a"],DisplayGood:C["a"],ModifyButton:N,CommentList:T["default"]},name:"GalleryDetail",props:{config:Object,access:Object,id:[String,Number]},data(){return{deleteLoading:!1}},computed:{...Object(o["e"])({user:t=>t.user.user,item:t=>t.board.detail}),...Object(o["c"])("user",["GRANT"]),table(){return this.config.brd_table},isModify(){if(this.user){if(this.user.user_id==this.item.user_id||this.GRANT>=r["LV"].SUPER)return"MODIFY"}else if(0==this.item.user_id)return"NO_MEMBER";return""}},watch:{id(){this.fetchData()}},serverPrefetch(){return this.fetchData()},mounted(){this.item?this.viewUp():this.fetchData()},destroyed(){this.SET_DETAIL(null)},methods:{...Object(o["d"])("board",["SET_DETAIL","VIEW_UP"]),...Object(o["b"])("board",["getBoardDetail"]),async fetchData(){const t={};this.$ssrContext&&(t.token=this.$ssrContext.token),await this.getBoardDetail({table:this.table,id:this.id,headers:t}),this.$ssrContext||this.viewUp()},async deleteItem(t){this.deleteLoading=!0;const e=await this.$myNotify.confirm("게시물을 삭제하시겠습니까?","게시물 삭제",{icon:"mdi-alert"});if(e){const e=await this.$axios.delete(`/api/board/${this.table}/${this.item.wr_id}?token=${t}`);e&&(this.$toast.info(e+"개의 게시물이 삭제되었습니다."),this.$router.push("/board/"+this.table))}this.deleteLoading=!1},modifyItem(t){this.$router.push(`/board/${this.table}/${this.item.wr_id}?act=write&token=${t}`)},async viewUp(){const t=this.$moment().format("L"),e=JSON.parse(window.localStorage.getItem("view"))||{},i=Object.keys(e);for(const a of i)a!=t&&delete e[a];e[t]||(e[t]={});const s=`${this.table}_${this.id}`;e[t][s]||(e[t][s]=!0,await this.$axios.put(`/api/board/view/${this.table}/${this.id}`),this.VIEW_UP(),window.localStorage.setItem("view",JSON.stringify(e)))}}},q=L,U=Object(p["a"])(q,s,a,!1,null,null,null);e["default"]=U.exports}}]);
//# sourceMappingURL=chunk-faae0792.4364fb69.js.map