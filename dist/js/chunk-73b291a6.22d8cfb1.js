(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73b291a6","chunk-2d0c207f"],{4926:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.user?r("div",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-textarea",{ref:"textarea",attrs:{outlined:"",label:t.label,rules:[t.rules.required({label:t.label})],rows:"2","auto-grow":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.save.apply(null,arguments):null},blur:t.resetValid},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t.item||t.wr_parent?r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("onClose")}}},[r("v-icon",[t._v("mdi-close")])],1):t._e(),r("v-btn",{attrs:{icon:""},on:{click:t.save}},[r("v-icon",[t._v("mdi-pencil")])],1)]},proxy:!0}],null,!1,575172357),model:{value:t.form.wr_content,callback:function(e){t.$set(t.form,"wr_content","string"===typeof e?e.trim():e)},expression:"form.wr_content"}})],1)],1):r("div",[t._v(" 로그인 후 댓글을 작성할 수 있습니다. "),r("v-btn",{attrs:{to:"/login?nextUrl="+t.$route.fullPath}},[t._v("로그인")])],1)},i=[],a=r("1da1"),o=r("5530"),s=(r("96cf"),r("a9e3"),r("99af"),r("2f62")),l=r("64f2"),m=r("248f"),c=r.n(m),u={name:"CommentForm",props:{table:{type:String,required:!0},wr_reply:{type:Number,required:!0},wr_parent:{type:Number,default:0},item:{type:Object,default:null}},data:function(){return{valid:!0,form:null}},computed:Object(o["a"])(Object(o["a"])({},Object(s["e"])({user:function(t){return t.user.user}})),{},{rules:function(){return c.a},label:function(){return this.item?"댓글 수정":0==this.wr_parent?"댓글 작성":"답글 달기"}}),created:function(){this.initForm()},methods:{initForm:function(){if(this.user)if(this.item)this.form=Object(l["deepCopy"])(this.item);else{var t={wr_reply:this.wr_reply,wr_parent:this.wr_parent,user_id:this.user.user_id,wr_email:this.user.user_email,wr_name:this.user.user_name,wr_content:""};this.form=t}},save:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.form.validate(),e.next=3,t.$nextTick();case 3:if(t.valid){e.next=5;break}return e.abrupt("return");case 5:if(!t.item){e.next=11;break}return e.next=8,t.$axios.put("/api/board/write/".concat(t.table,"/").concat(t.item.wr_id),t.form);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,t.$axios.post("/api/board/write/".concat(t.table),t.form);case 13:r=e.sent;case 14:r&&(t.item||t.$refs.textarea.blur(),t.$emit("onUpdate",r),t.initForm(),t.$refs.form.resetValidation(),t.$emit("onClose"));case 15:case"end":return e.stop()}}),e)})))()},resetValid:function(){this.$refs.form.resetValidation()}}},d=u,f=r("2877"),p=Object(f["a"])(d,n,i,!1,null,null,null);e["default"]=p.exports},5105:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card-text",[r("comment-form",{attrs:{wr_reply:t.id,table:t.table,parent:0},on:{onUpdate:t.updateItem}}),r("v-list",t._l(t.items,(function(e,n){return r("comment-item",{key:e.wr_id,attrs:{item:e,idx:n,table:t.table,access:t.access},on:{onReComment:t.reComment,onUpdate:t.updateItem}})})),1)],1)},i=[],a=r("1da1"),o=(r("96cf"),r("a9e3"),r("7db0"),r("a434"),r("4926")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-divider"),r("v-list-item",[r("div",[t.item.wr_dep>0?r("v-icon",{style:{"padding-left":32*(t.item.wr_dep-1)+8+"px"}},[t._v(" mdi-subdirectory-arrow-right ")]):t._e()],1),r("v-list-item-content",[r("v-subheader",[r("v-avatar",{attrs:{size:"28",color:"primary"}},[t._v(t._s(t.item.wr_name[0]))]),r("div",{staticClass:"ml-2"},[t._v(" "+t._s(t.item.wr_name)+" | "),r("i",[t._v(t._s(t.item.wr_email))])]),r("v-spacer"),r("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-clock-outline")]),r("display-time",{attrs:{time:t.item.wr_create_at}})],1),t.isModify?r("comment-form",{attrs:{item:t.item,table:t.table,wr_reply:t.item.wr_reply,wr_parent:t.item.wr_parent},on:{onClose:function(e){t.isModify=!1},onUpdate:t.modifyComment}}):r("div",{staticClass:"text-pre"},[t._v(t._s(t.item.wr_content))]),r("div",{staticClass:"d-flex"},[t.access.comment&&t.user?r("board-button",{attrs:{label:"답글쓰기",icon:"mdi-pencil-outline",plain:"",color:"primary"},on:{click:function(e){t.isComment=!0}}}):t._e(),r("v-spacer"),t.modifyGrant?r("board-button",{attrs:{label:"수정",icon:"mdi-pencil-outline",plain:"",color:"secondary"},on:{click:function(e){t.isModify=!t.isModify}}}):t._e(),t.modifyGrant?r("board-button",{attrs:{label:"삭제",icon:"mdi-delete-outline",plain:"",color:"red"}}):t._e()],1),t.isComment?r("comment-form",{attrs:{wr_parent:t.item.wr_id,wr_reply:t.item.wr_reply,table:t.table},on:{onClose:function(e){t.isComment=!1},onUpdate:t.reComment}}):t._e()],1)],1)],1)},l=[],m=r("5530"),c=r("caa8"),u=r("a439"),d=r("2f62"),f=r("bb5e"),p={components:{DisplayTime:c["a"],BoardButton:u["a"],CommentForm:o["default"]},name:"CommentItem",props:{item:{type:Object,required:!0},table:{type:String,required:!0},idx:{type:Number,required:!0},access:{type:Object,required:!0}},data:function(){return{isComment:!1,isModify:!1}},computed:Object(m["a"])(Object(m["a"])(Object(m["a"])({},Object(d["e"])("user",["user"])),Object(d["c"])("user",["GRANT"])),{},{modifyGrant:function(){return!(!this.user||!(this.user.user_id==this.item.user_id||this.GRANT>=f["LV"].SUPER))}}),methods:{reComment:function(t){this.$emit("onReComment",this.item,t)},modifyComment:function(t){this.$emit("onUpdate",t)}}},_=p,b=r("2877"),v=Object(b["a"])(_,s,l,!1,null,null,null),h=v.exports,y={components:{CommentForm:o["default"],CommentItem:h},name:"CommentList",props:{table:{type:String,required:!0},id:{type:Number,required:!0},access:{type:Object,required:!0}},data:function(){return{loading:!1,items:[],totalItems:0,options:{itemsPerPage:5,page:1,sortBy:["wr_grp","wr_order"],sortDesc:[!1,!0],stf:["wr_reply"],stc:["eq"],stx:[this.id]},item:null}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/board/list/".concat(t.table),{params:t.options});case 3:r=e.sent,r&&t.setData(r),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},setData:function(t){this.items=t.items,this.totalItems=t.totalItems},updateItem:function(t){console.log("updateItem",t);var e=this.items.find((function(e){return e.wr_id==t.wr_id}));if(e){var r=this.items.indexOf(e);this.items.splice(r,1,t)}else this.items.unshift(t),this.totalItems++},reComment:function(t,e){var r=this.items.find((function(e){return e.wr_id==t.wr_id}));if(r){var n=this.items.indexOf(r);this.items.splice(n+1,0,e),this.totalItems++}}}},w=y,x=Object(b["a"])(w,n,i,!1,null,null,null);e["default"]=x.exports},a439:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",t._b({attrs:{small:t.breakPointXS},on:{click:function(e){return t.$emit("click")}}},"v-btn",t.$attrs,!1),[r("v-icon",{attrs:{left:!t.breakPointXS}},[t._v(t._s(t.icon))]),t.breakPointXS?t._e():r("div",[t._v(t._s(t.label))])],1)},i=[],a={name:"BoardButton",props:{label:{type:String,default:""},icon:{type:String,default:""}},computed:{breakPointXS:function(){return this.$vuetify.breakpoint.xs}}},o=a,s=r("2877"),l=Object(s["a"])(o,n,i,!1,null,null,null);e["a"]=l.exports},caa8:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[r("span",t._g(t._b({},"span",i,!1),n),[t._v(" "+t._s(t.display)+" ")])]}}])},[t._v(" "+t._s(t.formatTime)+" ")])},i=[],a={name:"DisplayTime",props:{time:{type:String,required:!0}},computed:{formatTime:function(){return this.$moment(this.time).format("LLL")},display:function(){var t=this.$moment(this.time),e=this.$moment(),r=e.diff(t,"days");return r>0?t.format("LL"):t.fromNow()}}},o=a,s=r("2877"),l=Object(s["a"])(o,n,i,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-73b291a6.22d8cfb1.js.map